{% load static %}
{% load humanize %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vuvu - Buy Airtime</title>
    {% include 'users/includes/header.html' %}
</head>
<body>
    <!-- Transaction Form -->
     {% csrf_token %}
    <div class="main-content transasction-page"  >
        <div class="random" id="transaction-form" style="display: block;">
            <div class="top-section">
                <div class="services-header" >
                    {% csrf_token %}               
                    <div class="service-info">
                        <p>Airtime</p>
                    </div>            
                </div>
                <div class="settings-header" style="margin-top: 10px;">
                    <div class="image-box">
                        <!-- <svg width="50px" height="50px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path opacity="0.5" d="M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z" fill="#FFF2F1"/>
                            <path d="M16.807 19.0112C15.4398 19.9504 13.7841 20.5 12 20.5C10.2159 20.5 8.56023 19.9503 7.193 19.0111C6.58915 18.5963 6.33109 17.8062 6.68219 17.1632C7.41001 15.8302 8.90973 15 12 15C15.0903 15 16.59 15.8303 17.3178 17.1632C17.6689 17.8062 17.4108 18.5964 16.807 19.0112Z" fill="#FC846B"/>
                            <path d="M12 12C13.6569 12 15 10.6569 15 9C15 7.34315 13.6569 6 12 6C10.3432 6 9.00004 7.34315 9.00004 9C9.00004 10.6569 10.3432 12 12 12Z" fill="#FC846B"/>
                        </svg> -->
                        <!-- <a href="{% url 'dashboard' %}" onclick="">
                            <svg fill="#FFF" height="50px" width="50px" version="1.1" id="Icons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" xml:space="preserve">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier"> 
                                    <path d="M16,2C8.3,2,2,8.3,2,16s6.3,14,14,14s14-6.3,14-14S23.7,2,16,2z M18.7,20.3c0.4,0.4,0.4,1,0,1.4C18.5,21.9,18.3,22,18,22 s-0.5-0.1-0.7-0.3l-5-5c-0.4-0.4-0.4-1,0-1.4l5-5c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4L14.4,16L18.7,20.3z" stroke="#FC846B"></path> 
                                </g>
                            </svg>
                        </a> -->
                        <a class="link-nav" href="{% url 'dashboard' %}" onclick="">
                            <svg fill="#fc846b" height="32px" width="32px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve" stroke="#fc846b">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"/>                                
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"/>                                
                                <g id="SVGRepo_iconCarrier"> <g> <g> <path d="M256,0C114.837,0,0,114.837,0,256s114.837,256,256,256s256-114.837,256-256S397.163,0,256,0z M384,277.333H179.499 l48.917,48.917c8.341,8.341,8.341,21.824,0,30.165c-4.16,4.16-9.621,6.251-15.083,6.251c-5.461,0-10.923-2.091-15.083-6.251 l-85.333-85.333c-1.963-1.963-3.52-4.309-4.608-6.933c-2.155-5.205-2.155-11.093,0-16.299c1.088-2.624,2.645-4.971,4.608-6.933 l85.333-85.333c8.341-8.341,21.824-8.341,30.165,0s8.341,21.824,0,30.165l-48.917,48.917H384c11.776,0,21.333,9.557,21.333,21.333 S395.776,277.333,384,277.333z"/> </g> </g> </g>                                
                            </svg>
                        </a>
                    </div>
                    <div class="details">
                        <p>&#8358;{{mainBalance|intcomma}}</p>
                        <p>Available Balance</p>
                    </div>
                </div>
            </div>
            
            <!-- Transaction Form -->
             <div class="transaction-form" >
                <p class="tag">Please, fill the details below <span style="font-family: Noto Emoji, sans-serif;">ðŸ˜‰</span></p>
                <form action="">
                    <input type="text" name="network" hidden>
                    <div class="operator-container">
                        <a href="javascript:void(0)" onclick="" id="network-selector">
                            <div class="network-selector">
                                <div class="network-group">
                                    <div class="icon-box" id="selectedOperatorImg">
                                        <img src="" alt="">    
                                    </div>
                                    <p class="operator-text">Select a network</p>
                                </div>                    
                                <svg width="16px" height="16px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7 10L12 15L17 10" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>                        
                            </div>
                        </a>                    
                        <div class="dropdown" id="network-dropdown">
                            <a href="javascript:void(0)" class="mobile-operator" image-data="{% static 'telecomms/images/mtnlogo.png' %}" network-data="MTN" >
                                <div class="item">
                                    <div class="icon-box">
                                        <img src="{% static 'telecomms/images/mtnlogo.png' %}" alt="">
                                    </div>
                                    <div class="list">
                                        <p>MTN</p>
                                        <small>MTN Airtime</small>
                                    </div>
                                </div>
                            </a>
                            <a href="javascript:void(0)" class="mobile-operator" image-data="{% static 'telecomms/images/glologo.png' %}" network-data="Glo" >
                                <div class="item">
                                    <div class="icon-box">
                                        <img src="{% static 'telecomms/images/glologo.png' %}" alt="">
                                    </div>
                                    <div class="list">
                                        <p>Glo</p>
                                        <small>Glo Airtime</small>
                                    </div>
                                </div>
                            </a>
                            <a href="javascript:void(0)" class="mobile-operator" image-data="{% static 'telecomms/images/airtellogo.png' %}" network-data="Airtel" >
                                <div class="item">
                                    <div class="icon-box">
                                        <img src="{% static 'telecomms/images/airtellogo.png' %}" alt="">
    
                                    </div>
                                    <div class="list">
                                        <p>Airtel</p>
                                        <small>Airtel Airtime</small>
                                    </div>
                                </div>
                            </a>
                            <a href="javascript:void(0)" class="mobile-operator" image-data="{% static 'telecomms/images/9mobilelogo.png' %}" network-data="9Mobile" >
                                <div class="item">
                                    <div class="icon-box">
                                        <img src="{% static 'telecomms/images/9mobilelogo.png' %}" alt="">
    
                                    </div>
                                    <div class="list">
                                        <p>9Mobile</p>
                                        <small>9Mobile Airtime</small>
                                    </div>
                                </div>
                            </a>
    
    
                        </div>
                    </div>
                    <div class="input-group right-float">
                        <input type="text" name="phone_number" id="phone_number" placeholder="Enter phone number" maxlength="11" inputmode="numeric"> 
                        <svg fill="#000000" height="20px" width="20px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
                                viewBox="0 0 330 330" xml:space="preserve" class="open-beneficiary">
                            <g id="XMLID_12_">
                                <path id="XMLID_13_" d="M305,0H105C69.159,0,40,29.159,40,65v15H25c-8.284,0-15,6.716-15,15s6.716,15,15,15h15v40H25
                                    c-8.284,0-15,6.716-15,15s6.716,15,15,15h15v40H25c-8.284,0-15,6.716-15,15s6.716,15,15,15h15v15c0,35.841,29.159,65,65,65h200
                                    c8.284,0,15-6.716,15-15V15C320,6.716,313.284,0,305,0z M214.213,199.212c-28.342,28.342-63.587,39.049-78.718,23.918
                                    c-0.296-0.295-20.494-20.494-20.494-20.494l30.67-30.67l20.526,20.525l41.283-41.282l-20.526-20.526l30.683-30.682
                                    c0,0,20.199,20.198,20.494,20.494C253.263,135.626,242.556,170.87,214.213,199.212z"/>
                            </g>
                        </svg>                        
                    </div>
                    
                    <input type="text" class="" name="amount" id="amount" placeholder="How much?" inputmode="numeric">
                    <div class="discount-container">
                        <p>Discount Generated:&#8358; <Span class="calculatedDiscount"></Span></p>
                    </div>
                    <div class="details beneficiary">
                        <div class="data">
                            <p class="info">Number is ported</p>
                            <!-- <p class="value" id="">Airtime</p> -->
                            <div class="service-item">
                                <label class="switch">
                                <input class="checkbox" type="checkbox" id="is_ported">
                                <span class="slider round"></span>
                                </label>                        
                            </div>
                        </div>
                    </div>

                    <div class="error-feedback">
                        <div class="transaction-error">
                            <svg fill="#FFF" width="32px" height="32px" viewBox="0 0 24 24" id="caution-sign-circle" xmlns="http://www.w3.org/2000/svg" class="icon line">
                                <line id="primary-upstroke" x1="11.95" y1="16.5" x2="12.05" y2="16.5" style="fill: none; stroke: rgb(255, 255, 255); stroke-linecap: round; stroke-linejoin: round; stroke-width: 1.95;"></line>
                                <path id="primary" d="M3,12a9,9,0,0,1,9-9h0a9,9,0,0,1,9,9h0a9,9,0,0,1-9,9h0a9,9,0,0,1-9-9Zm9,0V7" style="fill: none; stroke: rgb(255, 255, 255); stroke-linecap: round; stroke-linejoin: round; stroke-width: 1.5;"></path>
                            </svg>
                            <p class="error-message" id="error-message"></p>
                        </div>
                    </div>
                    
    
                    <button href="javascript:void(0)" class="primary-btn disabled" style="margin-top: 80px;" id="buyAirtime">Proceed</button>
                </form>
             </div> 
        </div>
        

        <!--Transaction PIN Validation -->
        <div class="setting-modal" id="PINValidation">
            {% csrf_token %}  
            <div class="content">
                <div class="modal-indicator">
                    <!-- <hr> -->
                </div>
                <!-- Old PIN -->
                <div class="" id="transactionPIN">
                    <h6 class="header">Enter  4-Digit Transaction Pin</h6>
                    <p class="tag">We just want to make sure it is you&#x1F512;</p>
                    <form method="POST" class="setPinForm" id="setPinForm">
                        <div class="pin-container">
                            <div id="PINWrapper" ></div>
                        </div>
                    </form>
                    <!-- Feedback -->
                    <p class="text-center validationError" id="PINValidationError"></p>  
                    <div class="spacer"></div>                            
                </div>
            </div>
        </div>

        <!-- Offer modal -->
        <div class="setting-modal billSummary" id="offerModal" style="display: none;">
            {% csrf_token %}  
            <div class="content vacc">   
                <div class="modal-indicator"></div>
                <!-- Store Rating-->

                <!-- Android -->
                <div class="offer-details" id="playstoreRating" style="display: none;">
                    <!-- Offer Prompt -->
                    <div class="offer-prompt" style="display: block;">
                        <p class="offer-header">Congrats<span style="font-family: Noto Emoji, sans-serif;">ðŸŽ‰</span>!</p>
                        <p class="offer-note">Pay <strong>#<span class="offer-amount"></span></strong> for this transaction. <br>Kindly rate us on Playstore to claim this offer.!</p>                        
                        <div class="button-group">                        
                            <a class="primary-btn accept-offer" href="https://play.google.com/store/apps/details?id=com.Vuvu.Vuvu" onclick="" >Rate us on Playstore</a>
                            <button class="secondary-btn reject-offer" href="javascript:void(0)" onclick="">Miss out on Offer</button>
                        </div>
                    </div>
                    <!-- offer-pending -->
                    <div class="offer-pending" style="display: none;" id="offer-pending">
                        <p class="offer-note">Kindly complete your rating on 
                            <br>Playstore to continue. Thank you! 
                        </p>
                        <p class="offer-header confirmHeader" style="display: none;margin-bottom: 30px;">Congrats<span style="font-family: Noto Emoji, sans-serif;">ðŸŽ‰</span>!</p>
                        <div class="button-group confirm-offer" style="display: none;">                        
                            <button class="primary-btn continue-offer"  onclick="">Please Proceed</button>
                            <!-- <a class="secondary-btn " href="javascript:void(0)" onclick="">Miss out on Offer</a> -->
                        </div>
                    </div>                     
                </div>
                <!-- IOS -->
                <div class="offer-details" id="appstoreRating" style="display: none;">
                    <!-- Offer Prompt -->
                    <div class="offer-prompt" style="display: block;">
                        <p class="offer-header">Congrats<span style="font-family: Noto Emoji, sans-serif;">ðŸŽ‰</span>!</p>
                        <p class="offer-note">Pay <strong>#<span class="offer-amount"></span></strong> for this transaction. <br>Kindly rate us on Appstore to claim this offer.!</p>                        
                        <div class="button-group">                        
                            <a class="primary-btn accept-offer" href="https://apps.apple.com/ng/app/vuvu/id6738325760" onclick="" >Rate us on Appstore</a>
                            <button class="secondary-btn reject-offer" href="javascript:void(0)" onclick="" style="margin-top: 10px;">Miss out on Offer</button>
                        </div>
                    </div>
                    <!-- offer-pending -->
                    <div class="offer-pending" style="display: none;" id="offer-pending">
                        <p class="offer-note">Kindly complete your rating on 
                            <br>Appstore to continue. Thank you! 
                        </p>
                        <p class="offer-header confirmHeader" style="display: none; margin-bottom: 30px;">Congrats<span style="font-family: Noto Emoji, sans-serif;">ðŸŽ‰</span>!</p>
                        <div class="button-group confirm-offer" style="display: none;">                        
                            <button class="primary-btn continue-offer"  onclick="">Buy Now</button>
                            <!-- <a class="secondary-btn " href="javascript:void(0)" onclick="">Miss out on Offer</a> -->
                        </div>
                    </div>                     
                </div>
                <!-- TrustPilot -->
                <div class="offer-details" id="trustPilotRating" style="display: none;">
                    <!-- Offer Prompt -->
                    <div class="offer-prompt" style="display: block;">
                        <p class="offer-header">Congrats<span style="font-family: Noto Emoji, sans-serif;">ðŸŽ‰</span>!</p>
                        <p class="offer-note">Pay <strong>#<span class="offer-amount"></span></strong> for this transaction. <br>Kindly rate us on TrustPilot to claim this offer.!</p>                        
                        <div class="button-group">                        
                            <a class="primary-btn accept-offer" href="https://www.trustpilot.com/evaluate/vuvu.ng" onclick="" >Rate us on TrustPilot</a>
                            <button class="secondary-btn reject-offer" href="javascript:void(0)" onclick="" >Miss out on Offer</button>
                        </div>
                    </div>
                    <!-- offer-pending -->
                    <div class="offer-pending" style="display: none;" id="offer-pending">
                        <p class="offer-note">Kindly complete your rating on 
                            <br>TrustPilot to continue. Thank you! 
                        </p>
                        <div class="button-group confirm-offer" style="display: none;">                        
                            <button class="primary-btn continue-offer"  onclick="">Buy Now</button>
                            <!-- <a class="secondary-btn " href="javascript:void(0)" onclick="">Miss out on Offer</a> -->
                        </div>
                    </div>                     
                </div>
            </div>        
        </div>


        <!-- Sumamry modal -->
        <div class="setting-modal billSummary" id="billSummary" style="display: none;">
            {% csrf_token %}  
            <div class="content vacc">   
                <div class="modal-indicator"></div>
                <!-- Bill Summary -->
                <div  id="" style="display: block;">
                    <p class="header">Bill Summary</p>                      
                    <div class="details">
                        <div class="data">
                            <p class="info">Bill Type</p>
                            <p class="value" id="">Airtime</p>
                        </div>
                        <div class="data">
                            <p class="info">Network Provider</p>
                            <p class="value" id="networOperator">MTN</p>
                        </div>
                        <div class="data">
                            <p class="info">Phone Number</p>
                            <p class="value" id="recipient">08156325478</p>
                        </div>
                        <div class="data">
                            <p class="info">Amount</p>
                            <p class="value">&#8358;<span id="airtimeAmount">100</span></p>
                        </div>
                        <div class="data">
                            <p class="info">Discount Generated</p>
                            <p class="value">&#8358;<span id="cashback"></span></p>
                        </div>
                        <hr>
                        <div class="data">
                            <p class="info">Total</p>
                            <p class="value total" >&#8358;<span id="total">1,200</span></p>
                        </div>
                    </div>
                    <div class="details beneficiary">
                        <div class="data">
                            <p class="info">Save Beneficiary</p>
                            <!-- <p class="value" id="">Airtime</p> -->
                            <div class="service-item">
                                <label class="switch">
                                  <input class="checkbox" type="checkbox" id="saveBeneficiary" >
                                  <span class="slider round"></span>
                                </label>                        
                            </div>
                        </div>
                    </div>
                    <div class="error-feedback" style="display: none;">
                        <div class="transaction-error">
                            <svg fill="#FFF" width="32px" height="32px" viewBox="0 0 24 24" id="caution-sign-circle" xmlns="http://www.w3.org/2000/svg" class="icon line">
                                <line id="primary-upstroke" x1="11.95" y1="16.5" x2="12.05" y2="16.5" style="fill: none; stroke: rgb(255, 255, 255); stroke-linecap: round; stroke-linejoin: round; stroke-width: 1.95;"></line>
                                <path id="primary" d="M3,12a9,9,0,0,1,9-9h0a9,9,0,0,1,9,9h0a9,9,0,0,1-9,9h0a9,9,0,0,1-9-9Zm9,0V7" style="fill: none; stroke: rgb(255, 255, 255); stroke-linecap: round; stroke-linejoin: round; stroke-width: 1.5;"></path>
                            </svg>
                            <p class="error-message" id="error-message">Hello worlds</p>
                        </div>
                    </div> 
        
                    <div class="button-group">
                        <button href="javascript:void(0)" class="secondary-btn  cancelTrans" id="cancelAirtime" onclick="">Cancel</button>
                        <button href="javascript:void(0)" class="primary-btn"  id="purchaseAirtime" onclick="">Purchase</button>
                    </div>
                </div>
            </div>
        
        </div>

        
        <!-- Feeback modal -->
        <div class="setting-modal" id="transactionFeedback" style="display: none;">
            <div class="content vacc">   
                <div class="modal-indicator"></div>
                <!-- Feedback -->
                <div class="feedback-image-container">
                    <lottie-player src="https://lottie.host/a4b16f7e-e9e7-4cc1-8f34-54f435ea80c5/FmzCUPyAsk.json" background="transparent" speed="1" style="width: 180px; height: 180px" loop autoplay direction="1" mode="normal"></lottie-player>
                </div>
                <div class="feedback">
                    <p>Your <span>Airtime Purchase</span> <br>Was Successful</p>
                    <small>Your airtime should be received<br>within a few seconds.</small>
                </div>
                
                <div class="button-group">
                    <a class="secondary-btn link-nav" href="{% url 'buy-airtime' %}" onclick="">Buy Again</a>
                    <a class="primary-btn link-nav" href="{% url 'dashboard' %}" onclick="">Go to Dashboard</a>
                </div> 
            </div>
        
        </div>

        <!-- Beneficiary modal -->
        <div class="setting-modal" id="beneficiaryModal" style="display: none;">
            <div class="content beneficairy">   
                <div class="modal-indicator"></div>
                <h5 class="header">Beneficiaries</h5>
                <a href="javascript:void(0)"></a>
                {% if telecommsBeneficiaries != None and telecommsBeneficiaries|length > 0 %}
                    {% for beneficiary in telecommsBeneficiaries%}
                        <a href="javascript:void(0)" class="save-beneficiary" onclick="" data="{{beneficiary.operator}}|{{beneficiary.recipient}}">
                            <div class="data">
                                <div class="icon-box">
                                    {% if beneficiary.operator == 'MTN' %}
                                        <img src="{% static 'telecomms/images/mtnlogo.png' %}" alt=""> 
                                    {% elif beneficiary.operator == 'Glo' %}  
                                        <img src="{% static 'telecomms/images/glologo.png' %}" alt=""> 
                                    {% elif beneficiary.operator == '9Mobile' %}  
                                        <img src="{% static 'telecomms/images/9mobilelogo.png' %}" alt=""> 
                                    {% elif beneficiary.operator == 'Airtel' %}  
                                        <img src="{% static 'telecomms/images/airtellogo.png' %}" alt=""> 
                                    {% endif %}
                                </div>
                                <div class="info">
                                    <p class="operator">{{beneficiary.operator}}</p>
                                    <p class="recipient">{{beneficiary.recipient}}</p>
                                </div>
                            </div>
                        </a>
                    {% endfor %}                
                {% else %}
                <div class="note">
                    <p>You currently do not have any beneficiary saved</p>
                </div>
                {% endif %}
            </div>
        
        </div>

        <!-- Page Preloader -->
        <div class="loader-overlay" id="main-loader">
            <div class="loader"></div>
        </div>
        
        <!-- Offer Preloader -->
        <div class="loader-overlay" id="offer-loader" style="display: none;">
            <div class="loading-progress">
                <div class="loader"></div>
                <p class="discount" id="discountLoader">Generating discount</p>
                <p class="offers" id="offerLoader">Looking for offers</p>
            </div>            
        </div>
        
    </div>
    

    <script src="{% static 'telecomms/js/airtime.js' %}?v=1.0236"></script>
    <script src="{% static 'telecomms/js/simple.money.format.js' %}"></script>
    <script type="text/javascript">
		$('.money').simpleMoneyFormat();
	</script>
    
</body>
</html>